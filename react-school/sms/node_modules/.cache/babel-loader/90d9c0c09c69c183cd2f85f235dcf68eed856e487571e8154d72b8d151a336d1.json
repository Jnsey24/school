{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import styles,{layout}from\"../style\";import jwt_decode from'jwt-decode';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const navigate=useNavigate();const[token,setAuthToken]=useState(localStorage.getItem('token')||'');const[isLoggedIn,setIsLoggedIn]=useState(false);const[role,setUserRole]=useState('');useEffect(()=>{const token=localStorage.getItem('token');if(token){const decodedToken=jwt_decode(token);const userRole=decodedToken.role;setUserRole(userRole);setIsLoggedIn(true);}},[]);const handleLogin=()=>{navigate('/login');};const handleLogout=()=>{localStorage.removeItem('token');setAuthToken('');setIsLoggedIn(false);setUserRole('');};const Handledetails=()=>{if(isLoggedIn&&role){navigate(`/${role}`);}else{navigate('/login');}};return/*#__PURE__*/_jsxs(\"div\",{className:`${layout.sectionReverse}  ${styles.boxWidth} py-6 space-y-4`,children:[/*#__PURE__*/_jsx(\"div\",{className:`${layout.sectionInfo}  ${styles.boxWidth}`,children:!isLoggedIn?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"button\",{onClick:handleLogin,className:`py-1 px-4 font-poppins font-medium text-[40px] text-primary bg-grey-gradient rounded-[15px] outline-none ${styles.button}`,children:\"Login IN\"})}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:`py-1 px-4 font-poppins font-medium text-[40px] text-primary bg-grey-gradient rounded-[15px] outline-none ${styles.button}`,children:\"Logout\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:`${layout.sectionInfo} ${styles.flexCenter}`,children:[/*#__PURE__*/_jsxs(\"h2\",{className:styles.heading2,children:[\"Platform to Handle your \",/*#__PURE__*/_jsx(\"br\",{className:\"sm:block hidden\"}),\" School Data\"]}),/*#__PURE__*/_jsx(\"p\",{className:`${styles.paragraph} max-w-[470px] mt-5`,children:\"fjvnelrvneorv dcnrfnrvr iececne ceiceceoecne dcneicenc eineife vidfnr ceoneonc ecodocc cdmodc dcidcnceocc ceocmdco eocmrmemgr\"})]}),/*#__PURE__*/_jsx(\"div\",{className:`${layout.sectionInfo} ${styles.flexCenter} py-6 space-y-4`,children:/*#__PURE__*/_jsx(\"button\",{onClick:Handledetails,className:`py-4 px-6 font-poppins font-medium text-[18px] text-primary bg-blue-gradient rounded-[10px] outline-none ${styles.heading2}`,children:\"VIEW DETAILS\"})})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","styles","layout","jwt_decode","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Dashboard","navigate","token","setAuthToken","localStorage","getItem","isLoggedIn","setIsLoggedIn","role","setUserRole","decodedToken","userRole","handleLogin","handleLogout","removeItem","Handledetails","className","sectionReverse","boxWidth","children","sectionInfo","onClick","button","flexCenter","heading2","paragraph"],"sources":["C:/Users/SIDHARTHA/Desktop/school/react-school/sms/src/components/Dashboard.jsx"],"sourcesContent":["import React , {useState,useEffect} from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport styles, { layout } from \"../style\";\r\nimport jwt_decode from 'jwt-decode';\r\n\r\n\r\nconst Dashboard = () =>{\r\n    const navigate = useNavigate();\r\n    const [token,setAuthToken]= useState(localStorage.getItem('token') || '');\r\n    const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n    const [role,setUserRole] = useState('');\r\n\r\n    useEffect(()=>{\r\n      const token = localStorage.getItem('token');\r\n      if(token){\r\n        const decodedToken = jwt_decode(token);\r\n        const userRole = decodedToken.role; \r\n        setUserRole(userRole);\r\n        setIsLoggedIn(true);\r\n      }\r\n    },[])\r\n\r\n    const handleLogin = () => {\r\n      navigate('/login');\r\n    };\r\n\r\n\r\n    const handleLogout = () => {\r\n      localStorage.removeItem('token');\r\n      setAuthToken('');\r\n      setIsLoggedIn(false);\r\n      setUserRole('');\r\n    };\r\n\r\n    const Handledetails = () =>{\r\n      if(isLoggedIn && role){\r\n        navigate(`/${role}`);\r\n      }\r\n      else{\r\n        navigate('/login');\r\n      }\r\n    }\r\n  \r\n\r\n\r\nreturn(\r\n    <div className={`${layout.sectionReverse}  ${styles.boxWidth} py-6 space-y-4`}>\r\n \r\n  <div className={`${layout.sectionInfo}  ${styles.boxWidth}`}>\r\n     {\r\n      !isLoggedIn ? (\r\n        <>\r\n          <button\r\n        onClick={handleLogin}\r\n        className={`py-1 px-4 font-poppins font-medium text-[40px] text-primary bg-grey-gradient rounded-[15px] outline-none ${styles.button}`}>\r\n         Login IN\r\n       </button>\r\n        </>\r\n       ):( \r\n       <>\r\n        <button\r\n        onClick={handleLogout} \r\n        className={`py-1 px-4 font-poppins font-medium text-[40px] text-primary bg-grey-gradient rounded-[15px] outline-none ${styles.button}`}>\r\n         Logout\r\n       </button>\r\n       </>\r\n      )\r\n     }  \r\n  </div>\r\n\r\n  <div className={`${layout.sectionInfo} ${styles.flexCenter}`}>\r\n    <h2 className={styles.heading2}>\r\n      Platform to Handle your <br className=\"sm:block hidden\" /> School Data\r\n    </h2>\r\n    <p className={`${styles.paragraph} max-w-[470px] mt-5`}>\r\n      fjvnelrvneorv dcnrfnrvr iececne ceiceceoecne \r\n      dcneicenc eineife vidfnr ceoneonc ecodocc cdmodc\r\n      dcidcnceocc ceocmdco eocmrmemgr\r\n    </p>\r\n  </div>\r\n  <div className={`${layout.sectionInfo} ${styles.flexCenter} py-6 space-y-4`}>\r\n        <button\r\n         onClick= {Handledetails}\r\n         className={`py-4 px-6 font-poppins font-medium text-[18px] text-primary bg-blue-gradient rounded-[10px] outline-none ${styles.heading2}`}>\r\n          VIEW DETAILS\r\n        </button>\r\n      </div>\r\n\r\n</div>\r\n\r\n)\r\n};\r\nexport default Dashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}